var We=Object.defineProperty,Le=(e,n)=>{for(var r in n)We(e,r,{get:n[r],enumerable:!0})},xe={};Le(xe,{analyzeMetafile:()=>lt,analyzeMetafileSync:()=>ht,build:()=>rt,buildSync:()=>at,context:()=>st,default:()=>pt,formatMessages:()=>ot,formatMessagesSync:()=>ct,initialize:()=>mt,stop:()=>ft,transform:()=>it,transformSync:()=>ut,version:()=>nt});function Ee(e){let n=u=>{if(u===null)r.write8(0);else if(typeof u=="boolean")r.write8(1),r.write8(+u);else if(typeof u=="number")r.write8(2),r.write32(u|0);else if(typeof u=="string")r.write8(3),r.write(Z(u));else if(u instanceof Uint8Array)r.write8(4),r.write(u);else if(u instanceof Array){r.write8(5),r.write32(u.length);for(let w of u)n(w)}else{let w=Object.keys(u);r.write8(6),r.write32(w.length);for(let b of w)r.write(Z(b)),n(u[b])}},r=new Ue;return r.write32(0),r.write32(e.id<<1|+!e.isRequest),n(e.value),ve(r.buf,r.len-4,0),r.buf.subarray(0,r.len)}function Be(e){let n=()=>{switch(r.read8()){case 0:return null;case 1:return!!r.read8();case 2:return r.read32();case 3:return oe(r.read());case 4:return r.read();case 5:{let m=r.read32(),k=[];for(let c=0;c<m;c++)k.push(n());return k}case 6:{let m=r.read32(),k={};for(let c=0;c<m;c++)k[oe(r.read())]=n();return k}default:throw new Error("Invalid packet")}},r=new Ue(e),u=r.read32(),w=(u&1)===0;u>>>=1;let b=n();if(r.ptr!==e.length)throw new Error("Invalid packet");return{id:u,isRequest:w,value:b}}var Ue=class{constructor(e=new Uint8Array(1024)){this.buf=e,this.len=0,this.ptr=0}_write(e){if(this.len+e>this.buf.length){let n=new Uint8Array((this.len+e)*2);n.set(this.buf),this.buf=n}return this.len+=e,this.len-e}write8(e){let n=this._write(1);this.buf[n]=e}write32(e){let n=this._write(4);ve(this.buf,e,n)}write(e){let n=this._write(4+e.length);ve(this.buf,e.length,n),this.buf.set(e,n+4)}_read(e){if(this.ptr+e>this.buf.length)throw new Error("Invalid packet");return this.ptr+=e,this.ptr-e}read8(){return this.buf[this._read(1)]}read32(){return Re(this.buf,this._read(4))}read(){let e=this.read32(),n=new Uint8Array(e),r=this._read(n.length);return n.set(this.buf.subarray(r,r+e)),n}},Z,oe,be;if(typeof TextEncoder<"u"&&typeof TextDecoder<"u"){let e=new TextEncoder,n=new TextDecoder;Z=r=>e.encode(r),oe=r=>n.decode(r),be='new TextEncoder().encode("")'}else if(typeof Buffer<"u")Z=e=>Buffer.from(e),oe=e=>{let{buffer:n,byteOffset:r,byteLength:u}=e;return Buffer.from(n,r,u).toString()},be='Buffer.from("")';else throw new Error("No UTF-8 codec found");if(!(Z("")instanceof Uint8Array))throw new Error(`Invariant violation: "${be} instanceof Uint8Array" is incorrectly false

This indicates that your JavaScript environment is broken. You cannot use
esbuild in this environment because esbuild relies on this invariant. This
is not a problem with esbuild. You need to fix your environment instead.
`);function Re(e,n){return e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24}function ve(e,n,r){e[r++]=n,e[r++]=n>>8,e[r++]=n>>16,e[r++]=n>>24}var Y=JSON.stringify,_e="warning",Te="silent";function $e(e){if(X(e,"target"),e.indexOf(",")>=0)throw new Error(`Invalid target: ${e}`);return e}var de=()=>null,V=e=>typeof e=="boolean"?null:"a boolean",j=e=>typeof e=="string"?null:"a string",pe=e=>e instanceof RegExp?null:"a RegExp object",ie=e=>typeof e=="number"&&e===(e|0)?null:"an integer",Ae=e=>typeof e=="function"?null:"a function",G=e=>Array.isArray(e)?null:"an array",K=e=>typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"an object",qe=e=>typeof e=="object"&&e!==null?null:"an array or an object",Ve=e=>e instanceof WebAssembly.Module?null:"a WebAssembly.Module",ke=e=>typeof e=="object"&&!Array.isArray(e)?null:"an object or null",Ce=e=>typeof e=="string"||typeof e=="boolean"?null:"a string or a boolean",Ge=e=>typeof e=="string"||typeof e=="object"&&e!==null&&!Array.isArray(e)?null:"a string or an object",Ye=e=>typeof e=="string"||Array.isArray(e)?null:"a string or an array",Oe=e=>typeof e=="string"||e instanceof Uint8Array?null:"a string or a Uint8Array",Je=e=>typeof e=="string"||e instanceof URL?null:"a string or a URL";function s(e,n,r,u){let w=e[r];if(n[r+""]=!0,w===void 0)return;let b=u(w);if(b!==null)throw new Error(`${Y(r)} must be ${b}`);return w}function J(e,n,r){for(let u in e)if(!(u in n))throw new Error(`Invalid option ${r}: ${Y(u)}`)}function ze(e){let n=Object.create(null),r=s(e,n,"wasmURL",Je),u=s(e,n,"wasmModule",Ve),w=s(e,n,"worker",V);return J(e,n,"in initialize() call"),{wasmURL:r,wasmModule:u,worker:w}}function Se(e){let n;if(e!==void 0){n=Object.create(null);for(let r in e){let u=e[r];if(typeof u=="string"||u===!1)n[r]=u;else throw new Error(`Expected ${Y(r)} in mangle cache to map to either a string or false`)}}return n}function ye(e,n,r,u,w){let b=s(n,r,"color",V),m=s(n,r,"logLevel",j),k=s(n,r,"logLimit",ie);b!==void 0?e.push(`--color=${b}`):u&&e.push("--color=true"),e.push(`--log-level=${m||w}`),e.push(`--log-limit=${k||0}`)}function X(e,n,r){if(typeof e!="string")throw new Error(`Expected value for ${n}${r!==void 0?" "+Y(r):""} to be a string, got ${typeof e} instead`);return e}function Pe(e,n,r){let u=s(n,r,"legalComments",j),w=s(n,r,"sourceRoot",j),b=s(n,r,"sourcesContent",V),m=s(n,r,"target",Ye),k=s(n,r,"format",j),c=s(n,r,"globalName",j),N=s(n,r,"mangleProps",pe),I=s(n,r,"reserveProps",pe),R=s(n,r,"mangleQuoted",V),F=s(n,r,"minify",V),S=s(n,r,"minifySyntax",V),M=s(n,r,"minifyWhitespace",V),p=s(n,r,"minifyIdentifiers",V),d=s(n,r,"lineLimit",ie),a=s(n,r,"drop",G),$=s(n,r,"dropLabels",G),O=s(n,r,"charset",j),x=s(n,r,"treeShaking",V),h=s(n,r,"ignoreAnnotations",V),i=s(n,r,"jsx",j),l=s(n,r,"jsxFactory",j),g=s(n,r,"jsxFragment",j),U=s(n,r,"jsxImportSource",j),y=s(n,r,"jsxDev",V),f=s(n,r,"jsxSideEffects",V),v=s(n,r,"define",K),t=s(n,r,"logOverride",K),o=s(n,r,"supported",K),E=s(n,r,"pure",G),_=s(n,r,"keepNames",V),P=s(n,r,"platform",j),D=s(n,r,"tsconfigRaw",Ge);if(u&&e.push(`--legal-comments=${u}`),w!==void 0&&e.push(`--source-root=${w}`),b!==void 0&&e.push(`--sources-content=${b}`),m&&(Array.isArray(m)?e.push(`--target=${Array.from(m).map($e).join(",")}`):e.push(`--target=${$e(m)}`)),k&&e.push(`--format=${k}`),c&&e.push(`--global-name=${c}`),P&&e.push(`--platform=${P}`),D&&e.push(`--tsconfig-raw=${typeof D=="string"?D:JSON.stringify(D)}`),F&&e.push("--minify"),S&&e.push("--minify-syntax"),M&&e.push("--minify-whitespace"),p&&e.push("--minify-identifiers"),d&&e.push(`--line-limit=${d}`),O&&e.push(`--charset=${O}`),x!==void 0&&e.push(`--tree-shaking=${x}`),h&&e.push("--ignore-annotations"),a)for(let A of a)e.push(`--drop:${X(A,"drop")}`);if($&&e.push(`--drop-labels=${Array.from($).map(A=>X(A,"dropLabels")).join(",")}`),N&&e.push(`--mangle-props=${N.source}`),I&&e.push(`--reserve-props=${I.source}`),R!==void 0&&e.push(`--mangle-quoted=${R}`),i&&e.push(`--jsx=${i}`),l&&e.push(`--jsx-factory=${l}`),g&&e.push(`--jsx-fragment=${g}`),U&&e.push(`--jsx-import-source=${U}`),y&&e.push("--jsx-dev"),f&&e.push("--jsx-side-effects"),v)for(let A in v){if(A.indexOf("=")>=0)throw new Error(`Invalid define: ${A}`);e.push(`--define:${A}=${X(v[A],"define",A)}`)}if(t)for(let A in t){if(A.indexOf("=")>=0)throw new Error(`Invalid log override: ${A}`);e.push(`--log-override:${A}=${X(t[A],"log override",A)}`)}if(o)for(let A in o){if(A.indexOf("=")>=0)throw new Error(`Invalid supported: ${A}`);let C=o[A];if(typeof C!="boolean")throw new Error(`Expected value for supported ${Y(A)} to be a boolean, got ${typeof C} instead`);e.push(`--supported:${A}=${C}`)}if(E)for(let A of E)e.push(`--pure:${X(A,"pure")}`);_&&e.push("--keep-names")}function Xe(e,n,r,u,w){var b;let m=[],k=[],c=Object.create(null),N=null,I=null;ye(m,n,c,r,u),Pe(m,n,c);let R=s(n,c,"sourcemap",Ce),F=s(n,c,"bundle",V),S=s(n,c,"splitting",V),M=s(n,c,"preserveSymlinks",V),p=s(n,c,"metafile",V),d=s(n,c,"outfile",j),a=s(n,c,"outdir",j),$=s(n,c,"outbase",j),O=s(n,c,"tsconfig",j),x=s(n,c,"resolveExtensions",G),h=s(n,c,"nodePaths",G),i=s(n,c,"mainFields",G),l=s(n,c,"conditions",G),g=s(n,c,"external",G),U=s(n,c,"packages",j),y=s(n,c,"alias",K),f=s(n,c,"loader",K),v=s(n,c,"outExtension",K),t=s(n,c,"publicPath",j),o=s(n,c,"entryNames",j),E=s(n,c,"chunkNames",j),_=s(n,c,"assetNames",j),P=s(n,c,"inject",G),D=s(n,c,"banner",K),A=s(n,c,"footer",K),C=s(n,c,"entryPoints",qe),B=s(n,c,"absWorkingDir",j),W=s(n,c,"stdin",K),L=(b=s(n,c,"write",V))!=null?b:w,z=s(n,c,"allowOverwrite",V),ne=s(n,c,"mangleCache",K);if(c.plugins=!0,J(n,c,`in ${e}() call`),R&&m.push(`--sourcemap${R===!0?"":`=${R}`}`),F&&m.push("--bundle"),z&&m.push("--allow-overwrite"),S&&m.push("--splitting"),M&&m.push("--preserve-symlinks"),p&&m.push("--metafile"),d&&m.push(`--outfile=${d}`),a&&m.push(`--outdir=${a}`),$&&m.push(`--outbase=${$}`),O&&m.push(`--tsconfig=${O}`),U&&m.push(`--packages=${U}`),x){let T=[];for(let q of x){if(X(q,"resolve extension"),q.indexOf(",")>=0)throw new Error(`Invalid resolve extension: ${q}`);T.push(q)}m.push(`--resolve-extensions=${T.join(",")}`)}if(t&&m.push(`--public-path=${t}`),o&&m.push(`--entry-names=${o}`),E&&m.push(`--chunk-names=${E}`),_&&m.push(`--asset-names=${_}`),i){let T=[];for(let q of i){if(X(q,"main field"),q.indexOf(",")>=0)throw new Error(`Invalid main field: ${q}`);T.push(q)}m.push(`--main-fields=${T.join(",")}`)}if(l){let T=[];for(let q of l){if(X(q,"condition"),q.indexOf(",")>=0)throw new Error(`Invalid condition: ${q}`);T.push(q)}m.push(`--conditions=${T.join(",")}`)}if(g)for(let T of g)m.push(`--external:${X(T,"external")}`);if(y)for(let T in y){if(T.indexOf("=")>=0)throw new Error(`Invalid package name in alias: ${T}`);m.push(`--alias:${T}=${X(y[T],"alias",T)}`)}if(D)for(let T in D){if(T.indexOf("=")>=0)throw new Error(`Invalid banner file type: ${T}`);m.push(`--banner:${T}=${X(D[T],"banner",T)}`)}if(A)for(let T in A){if(T.indexOf("=")>=0)throw new Error(`Invalid footer file type: ${T}`);m.push(`--footer:${T}=${X(A[T],"footer",T)}`)}if(P)for(let T of P)m.push(`--inject:${X(T,"inject")}`);if(f)for(let T in f){if(T.indexOf("=")>=0)throw new Error(`Invalid loader extension: ${T}`);m.push(`--loader:${T}=${X(f[T],"loader",T)}`)}if(v)for(let T in v){if(T.indexOf("=")>=0)throw new Error(`Invalid out extension: ${T}`);m.push(`--out-extension:${T}=${X(v[T],"out extension",T)}`)}if(C)if(Array.isArray(C))for(let T=0,q=C.length;T<q;T++){let H=C[T];if(typeof H=="object"&&H!==null){let ee=Object.create(null),Q=s(H,ee,"in",j),ue=s(H,ee,"out",j);if(J(H,ee,"in entry point at index "+T),Q===void 0)throw new Error('Missing property "in" for entry point at index '+T);if(ue===void 0)throw new Error('Missing property "out" for entry point at index '+T);k.push([ue,Q])}else k.push(["",X(H,"entry point at index "+T)])}else for(let T in C)k.push([T,X(C[T],"entry point",T)]);if(W){let T=Object.create(null),q=s(W,T,"contents",Oe),H=s(W,T,"resolveDir",j),ee=s(W,T,"sourcefile",j),Q=s(W,T,"loader",j);J(W,T,'in "stdin" object'),ee&&m.push(`--sourcefile=${ee}`),Q&&m.push(`--loader=${Q}`),H&&(I=H),typeof q=="string"?N=Z(q):q instanceof Uint8Array&&(N=q)}let ae=[];if(h)for(let T of h)T+="",ae.push(T);return{entries:k,flags:m,write:L,stdinContents:N,stdinResolveDir:I,absWorkingDir:B,nodePaths:ae,mangleCache:Se(ne)}}function Qe(e,n,r,u){let w=[],b=Object.create(null);ye(w,n,b,r,u),Pe(w,n,b);let m=s(n,b,"sourcemap",Ce),k=s(n,b,"sourcefile",j),c=s(n,b,"loader",j),N=s(n,b,"banner",j),I=s(n,b,"footer",j),R=s(n,b,"mangleCache",K);return J(n,b,`in ${e}() call`),m&&w.push(`--sourcemap=${m===!0?"external":m}`),k&&w.push(`--sourcefile=${k}`),c&&w.push(`--loader=${c}`),N&&w.push(`--banner=${N}`),I&&w.push(`--footer=${I}`),{flags:w,mangleCache:Se(R)}}function He(e){let n={},r={didClose:!1,reason:""},u={},w=0,b=0,m=new Uint8Array(16*1024),k=0,c=p=>{let d=k+p.length;if(d>m.length){let $=new Uint8Array(d*2);$.set(m),m=$}m.set(p,k),k+=p.length;let a=0;for(;a+4<=k;){let $=Re(m,a);if(a+4+$>k)break;a+=4,M(m.subarray(a,a+$)),a+=$}a>0&&(m.copyWithin(0,a,k),k-=a)},N=p=>{r.didClose=!0,p&&(r.reason=": "+(p.message||p));let d="The service was stopped"+r.reason;for(let a in u)u[a](d,null);u={}},I=(p,d,a)=>{if(r.didClose)return a("The service is no longer running"+r.reason,null);let $=w++;u[$]=(O,x)=>{try{a(O,x)}finally{p&&p.unref()}},p&&p.ref(),e.writeToStdin(Ee({id:$,isRequest:!0,value:d}))},R=(p,d)=>{if(r.didClose)throw new Error("The service is no longer running"+r.reason);e.writeToStdin(Ee({id:p,isRequest:!1,value:d}))},F=async(p,d)=>{try{if(d.command==="ping"){R(p,{});return}if(typeof d.key=="number"){let a=n[d.key];if(!a)return;let $=a[d.command];if($){await $(p,d);return}}throw new Error("Invalid command: "+d.command)}catch(a){let $=[se(a,e,null,void 0,"")];try{R(p,{errors:$})}catch{}}},S=!0,M=p=>{if(S){S=!1;let a=String.fromCharCode(...p);if(a!=="0.24.2")throw new Error(`Cannot start service: Host version "0.24.2" does not match binary version ${Y(a)}`);return}let d=Be(p);if(d.isRequest)F(d.id,d.value);else{let a=u[d.id];delete u[d.id],d.value.error?a(d.value.error,{}):a(null,d.value)}};return{readFromStdout:c,afterClose:N,service:{buildOrContext:({callName:p,refs:d,options:a,isTTY:$,defaultWD:O,callback:x})=>{let h=0,i=b++,l={},g={ref(){++h===1&&d&&d.ref()},unref(){--h===0&&(delete n[i],d&&d.unref())}};n[i]=l,g.ref(),Ke(p,i,I,R,g,e,l,a,$,O,(U,y)=>{try{x(U,y)}finally{g.unref()}})},transform:({callName:p,refs:d,input:a,options:$,isTTY:O,fs:x,callback:h})=>{let i=De(),l=g=>{try{if(typeof a!="string"&&!(a instanceof Uint8Array))throw new Error('The input to "transform" must be a string or a Uint8Array');let{flags:U,mangleCache:y}=Qe(p,$,O,Te),f={command:"transform",flags:U,inputFS:g!==null,input:g!==null?Z(g):typeof a=="string"?Z(a):a};y&&(f.mangleCache=y),I(d,f,(v,t)=>{if(v)return h(new Error(v),null);let o=le(t.errors,i),E=le(t.warnings,i),_=1,P=()=>{if(--_===0){let D={warnings:E,code:t.code,map:t.map,mangleCache:void 0,legalComments:void 0};"legalComments"in t&&(D.legalComments=t?.legalComments),t.mangleCache&&(D.mangleCache=t?.mangleCache),h(null,D)}};if(o.length>0)return h(ce("Transform failed",o,E),null);t.codeFS&&(_++,x.readFile(t.code,(D,A)=>{D!==null?h(D,null):(t.code=A,P())})),t.mapFS&&(_++,x.readFile(t.map,(D,A)=>{D!==null?h(D,null):(t.map=A,P())})),P()})}catch(U){let y=[];try{ye(y,$,{},O,Te)}catch{}let f=se(U,e,i,void 0,"");I(d,{command:"error",flags:y,error:f},()=>{f.detail=i.load(f.detail),h(ce("Transform failed",[f],[]),null)})}};if((typeof a=="string"||a instanceof Uint8Array)&&a.length>1024*1024){let g=l;l=()=>x.writeFile(a,g)}l(null)},formatMessages:({callName:p,refs:d,messages:a,options:$,callback:O})=>{if(!$)throw new Error(`Missing second argument in ${p}() call`);let x={},h=s($,x,"kind",j),i=s($,x,"color",V),l=s($,x,"terminalWidth",ie);if(J($,x,`in ${p}() call`),h===void 0)throw new Error(`Missing "kind" in ${p}() call`);if(h!=="error"&&h!=="warning")throw new Error(`Expected "kind" to be "error" or "warning" in ${p}() call`);let g={command:"format-msgs",messages:te(a,"messages",null,"",l),isWarning:h==="warning"};i!==void 0&&(g.color=i),l!==void 0&&(g.terminalWidth=l),I(d,g,(U,y)=>{if(U)return O(new Error(U),null);O(null,y.messages)})},analyzeMetafile:({callName:p,refs:d,metafile:a,options:$,callback:O})=>{$===void 0&&($={});let x={},h=s($,x,"color",V),i=s($,x,"verbose",V);J($,x,`in ${p}() call`);let l={command:"analyze-metafile",metafile:a};h!==void 0&&(l.color=h),i!==void 0&&(l.verbose=i),I(d,l,(g,U)=>{if(g)return O(new Error(g),null);O(null,U.result)})}}}}function Ke(e,n,r,u,w,b,m,k,c,N,I){let R=De(),F=e==="context",S=(d,a)=>{let $=[];try{ye($,k,{},c,_e)}catch{}let O=se(d,b,R,void 0,a);r(w,{command:"error",flags:$,error:O},()=>{O.detail=R.load(O.detail),I(ce(F?"Context failed":"Build failed",[O],[]),null)})},M;if(typeof k=="object"){let d=k.plugins;if(d!==void 0){if(!Array.isArray(d))return S(new Error('"plugins" must be an array'),"");M=d}}if(M&&M.length>0){if(b.isSync)return S(new Error("Cannot use plugins in synchronous API calls"),"");Ze(n,r,u,w,b,m,k,M,R).then(d=>{if(!d.ok)return S(d.error,d.pluginName);try{p(d.requestPlugins,d.runOnEndCallbacks,d.scheduleOnDisposeCallbacks)}catch(a){S(a,"")}},d=>S(d,""));return}try{p(null,(d,a)=>a([],[]),()=>{})}catch(d){S(d,"")}function p(d,a,$){let O=b.hasFS,{entries:x,flags:h,write:i,stdinContents:l,stdinResolveDir:g,absWorkingDir:U,nodePaths:y,mangleCache:f}=Xe(e,k,c,_e,O);if(i&&!b.hasFS)throw new Error('The "write" option is unavailable in this environment');let v={command:"build",key:n,entries:x,flags:h,write:i,stdinContents:l,stdinResolveDir:g,absWorkingDir:U||N,nodePaths:y,context:F};d&&(v.plugins=d),f&&(v.mangleCache=f);let t=(_,P)=>{let D={errors:le(_.errors,R),warnings:le(_.warnings,R),outputFiles:void 0,metafile:void 0,mangleCache:void 0},A=D.errors.slice(),C=D.warnings.slice();_.outputFiles&&(D.outputFiles=_.outputFiles.map(tt)),_.metafile&&(D.metafile=JSON.parse(_.metafile)),_.mangleCache&&(D.mangleCache=_.mangleCache),_.writeToStdout!==void 0&&console.log(oe(_.writeToStdout).replace(/\n$/,"")),a(D,(B,W)=>{if(A.length>0||B.length>0){let L=ce("Build failed",A.concat(B),C.concat(W));return P(L,null,B,W)}P(null,D,B,W)})},o,E;F&&(m["on-end"]=(_,P)=>new Promise(D=>{t(P,(A,C,B,W)=>{let L={errors:B,warnings:W};E&&E(A,C),o=void 0,E=void 0,u(_,L),D()})})),r(w,v,(_,P)=>{if(_)return I(new Error(_),null);if(!F)return t(P,(C,B)=>($(),I(C,B)));if(P.errors.length>0)return I(ce("Context failed",P.errors,P.warnings),null);let D=!1,A={rebuild:()=>(o||(o=new Promise((C,B)=>{let W;E=(z,ne)=>{W||(W=()=>z?B(z):C(ne))};let L=()=>{r(w,{command:"rebuild",key:n},(z,ne)=>{z?B(new Error(z)):W?W():L()})};L()})),o),watch:(C={})=>new Promise((B,W)=>{if(!b.hasFS)throw new Error('Cannot use the "watch" API in this environment');J(C,{},"in watch() call"),r(w,{command:"watch",key:n},L=>{L?W(new Error(L)):B(void 0)})}),serve:(C={})=>new Promise((B,W)=>{if(!b.hasFS)throw new Error('Cannot use the "serve" API in this environment');let L={},z=s(C,L,"port",ie),ne=s(C,L,"host",j),ae=s(C,L,"servedir",j),T=s(C,L,"keyfile",j),q=s(C,L,"certfile",j),H=s(C,L,"fallback",j),ee=s(C,L,"onRequest",Ae);J(C,L,"in serve() call");let Q={command:"serve",key:n,onRequest:!!ee};z!==void 0&&(Q.port=z),ne!==void 0&&(Q.host=ne),ae!==void 0&&(Q.servedir=ae),T!==void 0&&(Q.keyfile=T),q!==void 0&&(Q.certfile=q),H!==void 0&&(Q.fallback=H),r(w,Q,(ue,Me)=>{if(ue)return W(new Error(ue));ee&&(m["serve-request"]=(Ne,Fe)=>{ee(Fe.args),u(Ne,{})}),B(Me)})}),cancel:()=>new Promise(C=>{if(D)return C();r(w,{command:"cancel",key:n},()=>{C()})}),dispose:()=>new Promise(C=>{if(D)return C();D=!0,r(w,{command:"dispose",key:n},()=>{C(),$(),w.unref()})})};w.ref(),I(null,A)})}}var Ze=async(e,n,r,u,w,b,m,k,c)=>{let N=[],I=[],R={},F={},S=[],M=0,p=0,d=[],a=!1;k=[...k];for(let x of k){let h={};if(typeof x!="object")throw new Error(`Plugin at index ${p} must be an object`);let i=s(x,h,"name",j);if(typeof i!="string"||i==="")throw new Error(`Plugin at index ${p} is missing a name`);try{let l=s(x,h,"setup",Ae);if(typeof l!="function")throw new Error("Plugin is missing a setup function");J(x,h,`on plugin ${Y(i)}`);let g={name:i,onStart:!1,onEnd:!1,onResolve:[],onLoad:[]};p++;let U=l({initialOptions:m,resolve:(y,f={})=>{if(!a)throw new Error('Cannot call "resolve" before plugin setup has completed');if(typeof y!="string")throw new Error("The path to resolve must be a string");let v=Object.create(null),t=s(f,v,"pluginName",j),o=s(f,v,"importer",j),E=s(f,v,"namespace",j),_=s(f,v,"resolveDir",j),P=s(f,v,"kind",j),D=s(f,v,"pluginData",de),A=s(f,v,"with",K);return J(f,v,"in resolve() call"),new Promise((C,B)=>{let W={command:"resolve",path:y,key:e,pluginName:i};if(t!=null&&(W.pluginName=t),o!=null&&(W.importer=o),E!=null&&(W.namespace=E),_!=null&&(W.resolveDir=_),P!=null)W.kind=P;else throw new Error('Must specify "kind" when calling "resolve"');D!=null&&(W.pluginData=c.store(D)),A!=null&&(W.with=et(A,"with")),n(u,W,(L,z)=>{L!==null?B(new Error(L)):C({errors:le(z.errors,c),warnings:le(z.warnings,c),path:z.path,external:z.external,sideEffects:z.sideEffects,namespace:z.namespace,suffix:z.suffix,pluginData:c.load(z.pluginData)})})})},onStart(y){let f='This error came from the "onStart" callback registered here:',v=fe(new Error(f),w,"onStart");N.push({name:i,callback:y,note:v}),g.onStart=!0},onEnd(y){let f='This error came from the "onEnd" callback registered here:',v=fe(new Error(f),w,"onEnd");I.push({name:i,callback:y,note:v}),g.onEnd=!0},onResolve(y,f){let v='This error came from the "onResolve" callback registered here:',t=fe(new Error(v),w,"onResolve"),o={},E=s(y,o,"filter",pe),_=s(y,o,"namespace",j);if(J(y,o,`in onResolve() call for plugin ${Y(i)}`),E==null)throw new Error("onResolve() call is missing a filter");let P=M++;R[P]={name:i,callback:f,note:t},g.onResolve.push({id:P,filter:E.source,namespace:_||""})},onLoad(y,f){let v='This error came from the "onLoad" callback registered here:',t=fe(new Error(v),w,"onLoad"),o={},E=s(y,o,"filter",pe),_=s(y,o,"namespace",j);if(J(y,o,`in onLoad() call for plugin ${Y(i)}`),E==null)throw new Error("onLoad() call is missing a filter");let P=M++;F[P]={name:i,callback:f,note:t},g.onLoad.push({id:P,filter:E.source,namespace:_||""})},onDispose(y){S.push(y)},esbuild:w.esbuild});U&&await U,d.push(g)}catch(l){return{ok:!1,error:l,pluginName:i}}}b["on-start"]=async(x,h)=>{c.clear();let i={errors:[],warnings:[]};await Promise.all(N.map(async({name:l,callback:g,note:U})=>{try{let y=await g();if(y!=null){if(typeof y!="object")throw new Error(`Expected onStart() callback in plugin ${Y(l)} to return an object`);let f={},v=s(y,f,"errors",G),t=s(y,f,"warnings",G);J(y,f,`from onStart() callback in plugin ${Y(l)}`),v!=null&&i.errors.push(...te(v,"errors",c,l,void 0)),t!=null&&i.warnings.push(...te(t,"warnings",c,l,void 0))}}catch(y){i.errors.push(se(y,w,c,U&&U(),l))}})),r(x,i)},b["on-resolve"]=async(x,h)=>{let i={},l="",g,U;for(let y of h.ids)try{({name:l,callback:g,note:U}=R[y]);let f=await g({path:h.path,importer:h.importer,namespace:h.namespace,resolveDir:h.resolveDir,kind:h.kind,pluginData:c.load(h.pluginData),with:h.with});if(f!=null){if(typeof f!="object")throw new Error(`Expected onResolve() callback in plugin ${Y(l)} to return an object`);let v={},t=s(f,v,"pluginName",j),o=s(f,v,"path",j),E=s(f,v,"namespace",j),_=s(f,v,"suffix",j),P=s(f,v,"external",V),D=s(f,v,"sideEffects",V),A=s(f,v,"pluginData",de),C=s(f,v,"errors",G),B=s(f,v,"warnings",G),W=s(f,v,"watchFiles",G),L=s(f,v,"watchDirs",G);J(f,v,`from onResolve() callback in plugin ${Y(l)}`),i.id=y,t!=null&&(i.pluginName=t),o!=null&&(i.path=o),E!=null&&(i.namespace=E),_!=null&&(i.suffix=_),P!=null&&(i.external=P),D!=null&&(i.sideEffects=D),A!=null&&(i.pluginData=c.store(A)),C!=null&&(i.errors=te(C,"errors",c,l,void 0)),B!=null&&(i.warnings=te(B,"warnings",c,l,void 0)),W!=null&&(i.watchFiles=me(W,"watchFiles")),L!=null&&(i.watchDirs=me(L,"watchDirs"));break}}catch(f){i={id:y,errors:[se(f,w,c,U&&U(),l)]};break}r(x,i)},b["on-load"]=async(x,h)=>{let i={},l="",g,U;for(let y of h.ids)try{({name:l,callback:g,note:U}=F[y]);let f=await g({path:h.path,namespace:h.namespace,suffix:h.suffix,pluginData:c.load(h.pluginData),with:h.with});if(f!=null){if(typeof f!="object")throw new Error(`Expected onLoad() callback in plugin ${Y(l)} to return an object`);let v={},t=s(f,v,"pluginName",j),o=s(f,v,"contents",Oe),E=s(f,v,"resolveDir",j),_=s(f,v,"pluginData",de),P=s(f,v,"loader",j),D=s(f,v,"errors",G),A=s(f,v,"warnings",G),C=s(f,v,"watchFiles",G),B=s(f,v,"watchDirs",G);J(f,v,`from onLoad() callback in plugin ${Y(l)}`),i.id=y,t!=null&&(i.pluginName=t),o instanceof Uint8Array?i.contents=o:o!=null&&(i.contents=Z(o)),E!=null&&(i.resolveDir=E),_!=null&&(i.pluginData=c.store(_)),P!=null&&(i.loader=P),D!=null&&(i.errors=te(D,"errors",c,l,void 0)),A!=null&&(i.warnings=te(A,"warnings",c,l,void 0)),C!=null&&(i.watchFiles=me(C,"watchFiles")),B!=null&&(i.watchDirs=me(B,"watchDirs"));break}}catch(f){i={id:y,errors:[se(f,w,c,U&&U(),l)]};break}r(x,i)};let $=(x,h)=>h([],[]);I.length>0&&($=(x,h)=>{(async()=>{let i=[],l=[];for(let{name:g,callback:U,note:y}of I){let f,v;try{let t=await U(x);if(t!=null){if(typeof t!="object")throw new Error(`Expected onEnd() callback in plugin ${Y(g)} to return an object`);let o={},E=s(t,o,"errors",G),_=s(t,o,"warnings",G);J(t,o,`from onEnd() callback in plugin ${Y(g)}`),E!=null&&(f=te(E,"errors",c,g,void 0)),_!=null&&(v=te(_,"warnings",c,g,void 0))}}catch(t){f=[se(t,w,c,y&&y(),g)]}if(f){i.push(...f);try{x.errors.push(...f)}catch{}}if(v){l.push(...v);try{x.warnings.push(...v)}catch{}}}h(i,l)})()});let O=()=>{for(let x of S)setTimeout(()=>x(),0)};return a=!0,{ok:!0,requestPlugins:d,runOnEndCallbacks:$,scheduleOnDisposeCallbacks:O}};function De(){let e=new Map,n=0;return{clear(){e.clear()},load(r){return e.get(r)},store(r){if(r===void 0)return-1;let u=n++;return e.set(u,r),u}}}function fe(e,n,r){let u,w=!1;return()=>{if(w)return u;w=!0;try{let b=(e.stack+"").split(`
`);b.splice(1,1);let m=Ie(n,b,r);if(m)return u={text:e.message,location:m},u}catch{}}}function se(e,n,r,u,w){let b="Internal error",m=null;try{b=(e&&e.message||e)+""}catch{}try{m=Ie(n,(e.stack+"").split(`
`),"")}catch{}return{id:"",pluginName:w,text:b,location:m,notes:u?[u]:[],detail:r?r.store(e):-1}}function Ie(e,n,r){let u="    at ";if(e.readFileSync&&!n[0].startsWith(u)&&n[1].startsWith(u))for(let w=1;w<n.length;w++){let b=n[w];if(b.startsWith(u))for(b=b.slice(u.length);;){let m=/^(?:new |async )?\S+ \((.*)\)$/.exec(b);if(m){b=m[1];continue}if(m=/^eval at \S+ \((.*)\)(?:, \S+:\d+:\d+)?$/.exec(b),m){b=m[1];continue}if(m=/^(\S+):(\d+):(\d+)$/.exec(b),m){let k;try{k=e.readFileSync(m[1],"utf8")}catch{break}let c=k.split(/\r\n|\r|\n|\u2028|\u2029/)[+m[2]-1]||"",N=+m[3]-1,I=c.slice(N,N+r.length)===r?r.length:0;return{file:m[1],namespace:"file",line:+m[2],column:Z(c.slice(0,N)).length,length:Z(c.slice(N,N+I)).length,lineText:c+`
`+n.slice(1).join(`
`),suggestion:""}}break}}return null}function ce(e,n,r){let u=5;e+=n.length<1?"":` with ${n.length} error${n.length<2?"":"s"}:`+n.slice(0,u+1).map((b,m)=>{if(m===u)return`
...`;if(!b.location)return`
error: ${b.text}`;let{file:k,line:c,column:N}=b.location,I=b.pluginName?`[plugin: ${b.pluginName}] `:"";return`
${k}:${c}:${N}: ERROR: ${I}${b.text}`}).join("");let w=new Error(e);for(let[b,m]of[["errors",n],["warnings",r]])Object.defineProperty(w,b,{configurable:!0,enumerable:!0,get:()=>m,set:k=>Object.defineProperty(w,b,{configurable:!0,enumerable:!0,value:k})});return w}function le(e,n){for(let r of e)r.detail=n.load(r.detail);return e}function je(e,n,r){if(e==null)return null;let u={},w=s(e,u,"file",j),b=s(e,u,"namespace",j),m=s(e,u,"line",ie),k=s(e,u,"column",ie),c=s(e,u,"length",ie),N=s(e,u,"lineText",j),I=s(e,u,"suggestion",j);if(J(e,u,n),N){let R=N.slice(0,(k&&k>0?k:0)+(c&&c>0?c:0)+(r&&r>0?r:80));!/[\x7F-\uFFFF]/.test(R)&&!/\n/.test(N)&&(N=R)}return{file:w||"",namespace:b||"",line:m||0,column:k||0,length:c||0,lineText:N||"",suggestion:I||""}}function te(e,n,r,u,w){let b=[],m=0;for(let k of e){let c={},N=s(k,c,"id",j),I=s(k,c,"pluginName",j),R=s(k,c,"text",j),F=s(k,c,"location",ke),S=s(k,c,"notes",G),M=s(k,c,"detail",de),p=`in element ${m} of "${n}"`;J(k,c,p);let d=[];if(S)for(let a of S){let $={},O=s(a,$,"text",j),x=s(a,$,"location",ke);J(a,$,p),d.push({text:O||"",location:je(x,p,w)})}b.push({id:N||"",pluginName:I||u,text:R||"",location:je(F,p,w),notes:d,detail:r?r.store(M):-1}),m++}return b}function me(e,n){let r=[];for(let u of e){if(typeof u!="string")throw new Error(`${Y(n)} must be an array of strings`);r.push(u)}return r}function et(e,n){let r=Object.create(null);for(let u in e){let w=e[u];if(typeof w!="string")throw new Error(`key ${Y(u)} in object ${Y(n)} must be a string`);r[u]=w}return r}function tt({path:e,contents:n,hash:r}){let u=null;return{path:e,contents:n,hash:r,get text(){let w=this.contents;return(u===null||w!==n)&&(n=w,u=oe(w)),u}}}var nt="0.24.2",rt=e=>he().build(e),st=e=>he().context(e),it=(e,n)=>he().transform(e,n),ot=(e,n)=>he().formatMessages(e,n),lt=(e,n)=>he().analyzeMetafile(e,n),at=()=>{throw new Error('The "buildSync" API only works in node')},ut=()=>{throw new Error('The "transformSync" API only works in node')},ct=()=>{throw new Error('The "formatMessagesSync" API only works in node')},ht=()=>{throw new Error('The "analyzeMetafileSync" API only works in node')},ft=()=>(ge&&ge(),Promise.resolve()),re,ge,we,he=()=>{if(we)return we;throw re?new Error('You need to wait for the promise returned from "initialize" to be resolved before calling this'):new Error('You need to call "initialize" before calling this')},mt=e=>{e=ze(e||{});let n=e.wasmURL,r=e.wasmModule,u=e.worker!==!1;if(!n&&!r)throw new Error('Must provide either the "wasmURL" option or the "wasmModule" option');if(re)throw new Error('Cannot call "initialize" more than once');return re=dt(n||"",r,u),re.catch(()=>{re=void 0}),re},dt=async(e,n,r)=>{let u,w,b=new Promise(R=>w=R);if(r){let R=new Blob(['onmessage=(postMessage=>{\n// Copyright 2018 The Go Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style\n// license that can be found in the LICENSE file.\nlet onmessage,globalThis={};for(let r=self;r;r=Object.getPrototypeOf(r))for(let f of Object.getOwnPropertyNames(r))f in globalThis||Object.defineProperty(globalThis,f,{get:()=>self[f]});(()=>{const r=()=>{const c=new Error("not implemented");return c.code="ENOSYS",c};if(!globalThis.fs){let c="";globalThis.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(i,s){c+=y.decode(s);const n=c.lastIndexOf(`\n`);return n!=-1&&(console.log(c.substring(0,n)),c=c.substring(n+1)),s.length},write(i,s,n,o,u,h){if(n!==0||o!==s.length||u!==null){h(r());return}const m=this.writeSync(i,s);h(null,m)},chmod(i,s,n){n(r())},chown(i,s,n,o){o(r())},close(i,s){s(r())},fchmod(i,s,n){n(r())},fchown(i,s,n,o){o(r())},fstat(i,s){s(r())},fsync(i,s){s(null)},ftruncate(i,s,n){n(r())},lchown(i,s,n,o){o(r())},link(i,s,n){n(r())},lstat(i,s){s(r())},mkdir(i,s,n){n(r())},open(i,s,n,o){o(r())},read(i,s,n,o,u,h){h(r())},readdir(i,s){s(r())},readlink(i,s){s(r())},rename(i,s,n){n(r())},rmdir(i,s){s(r())},stat(i,s){s(r())},symlink(i,s,n){n(r())},truncate(i,s,n){n(r())},unlink(i,s){s(r())},utimes(i,s,n,o){o(r())}}}if(globalThis.process||(globalThis.process={getuid(){return-1},getgid(){return-1},geteuid(){return-1},getegid(){return-1},getgroups(){throw r()},pid:-1,ppid:-1,umask(){throw r()},cwd(){throw r()},chdir(){throw r()}}),!globalThis.crypto)throw new Error("globalThis.crypto is not available, polyfill required (crypto.getRandomValues only)");if(!globalThis.performance)throw new Error("globalThis.performance is not available, polyfill required (performance.now only)");if(!globalThis.TextEncoder)throw new Error("globalThis.TextEncoder is not available, polyfill required");if(!globalThis.TextDecoder)throw new Error("globalThis.TextDecoder is not available, polyfill required");const f=new TextEncoder("utf-8"),y=new TextDecoder("utf-8");globalThis.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=t=>{t!==0&&console.warn("exit code:",t)},this._exitPromise=new Promise(t=>{this._resolveExitPromise=t}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;const c=(t,e)=>{this.mem.setUint32(t+0,e,!0),this.mem.setUint32(t+4,Math.floor(e/4294967296),!0)},i=(t,e)=>{this.mem.setUint32(t+0,e,!0)},s=t=>{const e=this.mem.getUint32(t+0,!0),l=this.mem.getInt32(t+4,!0);return e+l*4294967296},n=t=>{const e=this.mem.getFloat64(t,!0);if(e===0)return;if(!isNaN(e))return e;const l=this.mem.getUint32(t,!0);return this._values[l]},o=(t,e)=>{if(typeof e=="number"&&e!==0){if(isNaN(e)){this.mem.setUint32(t+4,2146959360,!0),this.mem.setUint32(t,0,!0);return}this.mem.setFloat64(t,e,!0);return}if(e===void 0){this.mem.setFloat64(t,0,!0);return}let a=this._ids.get(e);a===void 0&&(a=this._idPool.pop(),a===void 0&&(a=this._values.length),this._values[a]=e,this._goRefCounts[a]=0,this._ids.set(e,a)),this._goRefCounts[a]++;let g=0;switch(typeof e){case"object":e!==null&&(g=1);break;case"string":g=2;break;case"symbol":g=3;break;case"function":g=4;break}this.mem.setUint32(t+4,2146959360|g,!0),this.mem.setUint32(t,a,!0)},u=t=>{const e=s(t+0),l=s(t+8);return new Uint8Array(this._inst.exports.mem.buffer,e,l)},h=t=>{const e=s(t+0),l=s(t+8),a=new Array(l);for(let g=0;g<l;g++)a[g]=n(e+g*8);return a},m=t=>{const e=s(t+0),l=s(t+8);return y.decode(new DataView(this._inst.exports.mem.buffer,e,l))},d=Date.now()-performance.now();this.importObject={_gotest:{add:(t,e)=>t+e},gojs:{"runtime.wasmExit":t=>{t>>>=0;const e=this.mem.getInt32(t+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(e)},"runtime.wasmWrite":t=>{t>>>=0;const e=s(t+8),l=s(t+16),a=this.mem.getInt32(t+24,!0);globalThis.fs.writeSync(e,new Uint8Array(this._inst.exports.mem.buffer,l,a))},"runtime.resetMemoryDataView":t=>{t>>>=0,this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":t=>{t>>>=0,c(t+8,(d+performance.now())*1e6)},"runtime.walltime":t=>{t>>>=0;const e=new Date().getTime();c(t+8,e/1e3),this.mem.setInt32(t+16,e%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":t=>{t>>>=0;const e=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(e,setTimeout(()=>{for(this._resume();this._scheduledTimeouts.has(e);)console.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()},s(t+8))),this.mem.setInt32(t+16,e,!0)},"runtime.clearTimeoutEvent":t=>{t>>>=0;const e=this.mem.getInt32(t+8,!0);clearTimeout(this._scheduledTimeouts.get(e)),this._scheduledTimeouts.delete(e)},"runtime.getRandomData":t=>{t>>>=0,crypto.getRandomValues(u(t+8))},"syscall/js.finalizeRef":t=>{t>>>=0;const e=this.mem.getUint32(t+8,!0);if(this._goRefCounts[e]--,this._goRefCounts[e]===0){const l=this._values[e];this._values[e]=null,this._ids.delete(l),this._idPool.push(e)}},"syscall/js.stringVal":t=>{t>>>=0,o(t+24,m(t+8))},"syscall/js.valueGet":t=>{t>>>=0;const e=Reflect.get(n(t+8),m(t+16));t=this._inst.exports.getsp()>>>0,o(t+32,e)},"syscall/js.valueSet":t=>{t>>>=0,Reflect.set(n(t+8),m(t+16),n(t+32))},"syscall/js.valueDelete":t=>{t>>>=0,Reflect.deleteProperty(n(t+8),m(t+16))},"syscall/js.valueIndex":t=>{t>>>=0,o(t+24,Reflect.get(n(t+8),s(t+16)))},"syscall/js.valueSetIndex":t=>{t>>>=0,Reflect.set(n(t+8),s(t+16),n(t+24))},"syscall/js.valueCall":t=>{t>>>=0;try{const e=n(t+8),l=Reflect.get(e,m(t+16)),a=h(t+32),g=Reflect.apply(l,e,a);t=this._inst.exports.getsp()>>>0,o(t+56,g),this.mem.setUint8(t+64,1)}catch(e){t=this._inst.exports.getsp()>>>0,o(t+56,e),this.mem.setUint8(t+64,0)}},"syscall/js.valueInvoke":t=>{t>>>=0;try{const e=n(t+8),l=h(t+16),a=Reflect.apply(e,void 0,l);t=this._inst.exports.getsp()>>>0,o(t+40,a),this.mem.setUint8(t+48,1)}catch(e){t=this._inst.exports.getsp()>>>0,o(t+40,e),this.mem.setUint8(t+48,0)}},"syscall/js.valueNew":t=>{t>>>=0;try{const e=n(t+8),l=h(t+16),a=Reflect.construct(e,l);t=this._inst.exports.getsp()>>>0,o(t+40,a),this.mem.setUint8(t+48,1)}catch(e){t=this._inst.exports.getsp()>>>0,o(t+40,e),this.mem.setUint8(t+48,0)}},"syscall/js.valueLength":t=>{t>>>=0,c(t+16,parseInt(n(t+8).length))},"syscall/js.valuePrepareString":t=>{t>>>=0;const e=f.encode(String(n(t+8)));o(t+16,e),c(t+24,e.length)},"syscall/js.valueLoadString":t=>{t>>>=0;const e=n(t+8);u(t+16).set(e)},"syscall/js.valueInstanceOf":t=>{t>>>=0,this.mem.setUint8(t+24,n(t+8)instanceof n(t+16)?1:0)},"syscall/js.copyBytesToGo":t=>{t>>>=0;const e=u(t+8),l=n(t+32);if(!(l instanceof Uint8Array||l instanceof Uint8ClampedArray)){this.mem.setUint8(t+48,0);return}const a=l.subarray(0,e.length);e.set(a),c(t+40,a.length),this.mem.setUint8(t+48,1)},"syscall/js.copyBytesToJS":t=>{t>>>=0;const e=n(t+8),l=u(t+16);if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray)){this.mem.setUint8(t+48,0);return}const a=l.subarray(0,e.length);e.set(a),c(t+40,a.length),this.mem.setUint8(t+48,1)},debug:t=>{console.log(t)}}}}async run(c){if(!(c instanceof WebAssembly.Instance))throw new Error("Go.run: WebAssembly.Instance expected");this._inst=c,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,globalThis,this],this._goRefCounts=new Array(this._values.length).fill(1/0),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[globalThis,5],[this,6]]),this._idPool=[],this.exited=!1;let i=4096;const s=d=>{const t=i,e=f.encode(d+"\\0");return new Uint8Array(this.mem.buffer,i,e.length).set(e),i+=e.length,i%8!==0&&(i+=8-i%8),t},n=this.argv.length,o=[];this.argv.forEach(d=>{o.push(s(d))}),o.push(0),Object.keys(this.env).sort().forEach(d=>{o.push(s(`${d}=${this.env[d]}`))}),o.push(0);const h=i;if(o.forEach(d=>{this.mem.setUint32(i,d,!0),this.mem.setUint32(i+4,0,!0),i+=8}),i>=12288)throw new Error("total length of command line and environment variables exceeds limit");this._inst.exports.run(n,h),this.exited&&this._resolveExitPromise(),await this._exitPromise}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(c){const i=this;return function(){const s={id:c,this:this,args:arguments};return i._pendingEvent=s,i._resume(),s.result}}}})(),onmessage=({data:r})=>{let f=new TextDecoder,y=globalThis.fs,c="";y.writeSync=(u,h)=>{if(u===1)postMessage(h);else if(u===2){c+=f.decode(h);let m=c.split(`\n`);m.length>1&&console.log(m.slice(0,-1).join(`\n`)),c=m[m.length-1]}else throw new Error("Bad write");return h.length};let i=[],s,n=0;onmessage=({data:u})=>(u.length>0&&(i.push(u),s&&s()),o),y.read=(u,h,m,d,t,e)=>{if(u!==0||m!==0||d!==h.length||t!==null)throw new Error("Bad read");if(i.length===0){s=()=>y.read(u,h,m,d,t,e);return}let l=i[0],a=Math.max(0,Math.min(d,l.length-n));h.set(l.subarray(n,n+a),m),n+=a,n===l.length&&(i.shift(),n=0),e(null,a)};let o=new globalThis.Go;return o.argv=["","--service=0.24.2"],tryToInstantiateModule(r,o).then(u=>{postMessage(null),o.run(u)},u=>{postMessage(u)}),o};async function tryToInstantiateModule(r,f){if(r instanceof WebAssembly.Module)return WebAssembly.instantiate(r,f.importObject);const y=await fetch(r);if(!y.ok)throw new Error(`Failed to download ${JSON.stringify(r)}`);if("instantiateStreaming"in WebAssembly&&/^application\\/wasm($|;)/i.test(y.headers.get("Content-Type")||""))return(await WebAssembly.instantiateStreaming(y,f.importObject)).instance;const c=await y.arrayBuffer();return(await WebAssembly.instantiate(c,f.importObject)).instance}return r=>onmessage(r);})(postMessage)'],{type:"text/javascript"});u=new Worker(URL.createObjectURL(R))}else{let R=(S=>{let M,p={};for(let a=self;a;a=Object.getPrototypeOf(a))for(let $ of Object.getOwnPropertyNames(a))$ in p||Object.defineProperty(p,$,{get:()=>self[$]});(()=>{let a=()=>{let x=new Error("not implemented");return x.code="ENOSYS",x};if(!p.fs){let x="";p.fs={constants:{O_WRONLY:-1,O_RDWR:-1,O_CREAT:-1,O_TRUNC:-1,O_APPEND:-1,O_EXCL:-1},writeSync(h,i){x+=O.decode(i);let l=x.lastIndexOf(`
`);return l!=-1&&(console.log(x.substring(0,l)),x=x.substring(l+1)),i.length},write(h,i,l,g,U,y){if(l!==0||g!==i.length||U!==null){y(a());return}let f=this.writeSync(h,i);y(null,f)},chmod(h,i,l){l(a())},chown(h,i,l,g){g(a())},close(h,i){i(a())},fchmod(h,i,l){l(a())},fchown(h,i,l,g){g(a())},fstat(h,i){i(a())},fsync(h,i){i(null)},ftruncate(h,i,l){l(a())},lchown(h,i,l,g){g(a())},link(h,i,l){l(a())},lstat(h,i){i(a())},mkdir(h,i,l){l(a())},open(h,i,l,g){g(a())},read(h,i,l,g,U,y){y(a())},readdir(h,i){i(a())},readlink(h,i){i(a())},rename(h,i,l){l(a())},rmdir(h,i){i(a())},stat(h,i){i(a())},symlink(h,i,l){l(a())},truncate(h,i,l){l(a())},unlink(h,i){i(a())},utimes(h,i,l,g){g(a())}}}if(p.process||(p.process={getuid(){return-1},getgid(){return-1},geteuid(){return-1},getegid(){return-1},getgroups(){throw a()},pid:-1,ppid:-1,umask(){throw a()},cwd(){throw a()},chdir(){throw a()}}),!p.crypto)throw new Error("globalThis.crypto is not available, polyfill required (crypto.getRandomValues only)");if(!p.performance)throw new Error("globalThis.performance is not available, polyfill required (performance.now only)");if(!p.TextEncoder)throw new Error("globalThis.TextEncoder is not available, polyfill required");if(!p.TextDecoder)throw new Error("globalThis.TextDecoder is not available, polyfill required");let $=new TextEncoder("utf-8"),O=new TextDecoder("utf-8");p.Go=class{constructor(){this.argv=["js"],this.env={},this.exit=t=>{t!==0&&console.warn("exit code:",t)},this._exitPromise=new Promise(t=>{this._resolveExitPromise=t}),this._pendingEvent=null,this._scheduledTimeouts=new Map,this._nextCallbackTimeoutID=1;let x=(t,o)=>{this.mem.setUint32(t+0,o,!0),this.mem.setUint32(t+4,Math.floor(o/4294967296),!0)},h=(t,o)=>{this.mem.setUint32(t+0,o,!0)},i=t=>{let o=this.mem.getUint32(t+0,!0),E=this.mem.getInt32(t+4,!0);return o+E*4294967296},l=t=>{let o=this.mem.getFloat64(t,!0);if(o===0)return;if(!isNaN(o))return o;let E=this.mem.getUint32(t,!0);return this._values[E]},g=(t,o)=>{if(typeof o=="number"&&o!==0){if(isNaN(o)){this.mem.setUint32(t+4,2146959360,!0),this.mem.setUint32(t,0,!0);return}this.mem.setFloat64(t,o,!0);return}if(o===void 0){this.mem.setFloat64(t,0,!0);return}let E=this._ids.get(o);E===void 0&&(E=this._idPool.pop(),E===void 0&&(E=this._values.length),this._values[E]=o,this._goRefCounts[E]=0,this._ids.set(o,E)),this._goRefCounts[E]++;let _=0;switch(typeof o){case"object":o!==null&&(_=1);break;case"string":_=2;break;case"symbol":_=3;break;case"function":_=4;break}this.mem.setUint32(t+4,2146959360|_,!0),this.mem.setUint32(t,E,!0)},U=t=>{let o=i(t+0),E=i(t+8);return new Uint8Array(this._inst.exports.mem.buffer,o,E)},y=t=>{let o=i(t+0),E=i(t+8),_=new Array(E);for(let P=0;P<E;P++)_[P]=l(o+P*8);return _},f=t=>{let o=i(t+0),E=i(t+8);return O.decode(new DataView(this._inst.exports.mem.buffer,o,E))},v=Date.now()-performance.now();this.importObject={_gotest:{add:(t,o)=>t+o},gojs:{"runtime.wasmExit":t=>{t>>>=0;let o=this.mem.getInt32(t+8,!0);this.exited=!0,delete this._inst,delete this._values,delete this._goRefCounts,delete this._ids,delete this._idPool,this.exit(o)},"runtime.wasmWrite":t=>{t>>>=0;let o=i(t+8),E=i(t+16),_=this.mem.getInt32(t+24,!0);p.fs.writeSync(o,new Uint8Array(this._inst.exports.mem.buffer,E,_))},"runtime.resetMemoryDataView":t=>{t>>>=0,this.mem=new DataView(this._inst.exports.mem.buffer)},"runtime.nanotime1":t=>{t>>>=0,x(t+8,(v+performance.now())*1e6)},"runtime.walltime":t=>{t>>>=0;let o=new Date().getTime();x(t+8,o/1e3),this.mem.setInt32(t+16,o%1e3*1e6,!0)},"runtime.scheduleTimeoutEvent":t=>{t>>>=0;let o=this._nextCallbackTimeoutID;this._nextCallbackTimeoutID++,this._scheduledTimeouts.set(o,setTimeout(()=>{for(this._resume();this._scheduledTimeouts.has(o);)console.warn("scheduleTimeoutEvent: missed timeout event"),this._resume()},i(t+8))),this.mem.setInt32(t+16,o,!0)},"runtime.clearTimeoutEvent":t=>{t>>>=0;let o=this.mem.getInt32(t+8,!0);clearTimeout(this._scheduledTimeouts.get(o)),this._scheduledTimeouts.delete(o)},"runtime.getRandomData":t=>{t>>>=0,crypto.getRandomValues(U(t+8))},"syscall/js.finalizeRef":t=>{t>>>=0;let o=this.mem.getUint32(t+8,!0);if(this._goRefCounts[o]--,this._goRefCounts[o]===0){let E=this._values[o];this._values[o]=null,this._ids.delete(E),this._idPool.push(o)}},"syscall/js.stringVal":t=>{t>>>=0,g(t+24,f(t+8))},"syscall/js.valueGet":t=>{t>>>=0;let o=Reflect.get(l(t+8),f(t+16));t=this._inst.exports.getsp()>>>0,g(t+32,o)},"syscall/js.valueSet":t=>{t>>>=0,Reflect.set(l(t+8),f(t+16),l(t+32))},"syscall/js.valueDelete":t=>{t>>>=0,Reflect.deleteProperty(l(t+8),f(t+16))},"syscall/js.valueIndex":t=>{t>>>=0,g(t+24,Reflect.get(l(t+8),i(t+16)))},"syscall/js.valueSetIndex":t=>{t>>>=0,Reflect.set(l(t+8),i(t+16),l(t+24))},"syscall/js.valueCall":t=>{t>>>=0;try{let o=l(t+8),E=Reflect.get(o,f(t+16)),_=y(t+32),P=Reflect.apply(E,o,_);t=this._inst.exports.getsp()>>>0,g(t+56,P),this.mem.setUint8(t+64,1)}catch(o){t=this._inst.exports.getsp()>>>0,g(t+56,o),this.mem.setUint8(t+64,0)}},"syscall/js.valueInvoke":t=>{t>>>=0;try{let o=l(t+8),E=y(t+16),_=Reflect.apply(o,void 0,E);t=this._inst.exports.getsp()>>>0,g(t+40,_),this.mem.setUint8(t+48,1)}catch(o){t=this._inst.exports.getsp()>>>0,g(t+40,o),this.mem.setUint8(t+48,0)}},"syscall/js.valueNew":t=>{t>>>=0;try{let o=l(t+8),E=y(t+16),_=Reflect.construct(o,E);t=this._inst.exports.getsp()>>>0,g(t+40,_),this.mem.setUint8(t+48,1)}catch(o){t=this._inst.exports.getsp()>>>0,g(t+40,o),this.mem.setUint8(t+48,0)}},"syscall/js.valueLength":t=>{t>>>=0,x(t+16,parseInt(l(t+8).length))},"syscall/js.valuePrepareString":t=>{t>>>=0;let o=$.encode(String(l(t+8)));g(t+16,o),x(t+24,o.length)},"syscall/js.valueLoadString":t=>{t>>>=0;let o=l(t+8);U(t+16).set(o)},"syscall/js.valueInstanceOf":t=>{t>>>=0,this.mem.setUint8(t+24,l(t+8)instanceof l(t+16)?1:0)},"syscall/js.copyBytesToGo":t=>{t>>>=0;let o=U(t+8),E=l(t+32);if(!(E instanceof Uint8Array||E instanceof Uint8ClampedArray)){this.mem.setUint8(t+48,0);return}let _=E.subarray(0,o.length);o.set(_),x(t+40,_.length),this.mem.setUint8(t+48,1)},"syscall/js.copyBytesToJS":t=>{t>>>=0;let o=l(t+8),E=U(t+16);if(!(o instanceof Uint8Array||o instanceof Uint8ClampedArray)){this.mem.setUint8(t+48,0);return}let _=E.subarray(0,o.length);o.set(_),x(t+40,_.length),this.mem.setUint8(t+48,1)},debug:t=>{console.log(t)}}}}async run(x){if(!(x instanceof WebAssembly.Instance))throw new Error("Go.run: WebAssembly.Instance expected");this._inst=x,this.mem=new DataView(this._inst.exports.mem.buffer),this._values=[NaN,0,null,!0,!1,p,this],this._goRefCounts=new Array(this._values.length).fill(1/0),this._ids=new Map([[0,1],[null,2],[!0,3],[!1,4],[p,5],[this,6]]),this._idPool=[],this.exited=!1;let h=4096,i=y=>{let f=h,v=$.encode(y+"\0");return new Uint8Array(this.mem.buffer,h,v.length).set(v),h+=v.length,h%8!==0&&(h+=8-h%8),f},l=this.argv.length,g=[];this.argv.forEach(y=>{g.push(i(y))}),g.push(0),Object.keys(this.env).sort().forEach(y=>{g.push(i(`${y}=${this.env[y]}`))}),g.push(0);let U=h;if(g.forEach(y=>{this.mem.setUint32(h,y,!0),this.mem.setUint32(h+4,0,!0),h+=8}),h>=12288)throw new Error("total length of command line and environment variables exceeds limit");this._inst.exports.run(l,U),this.exited&&this._resolveExitPromise(),await this._exitPromise}_resume(){if(this.exited)throw new Error("Go program has already exited");this._inst.exports.resume(),this.exited&&this._resolveExitPromise()}_makeFuncWrapper(x){let h=this;return function(){let i={id:x,this:this,args:arguments};return h._pendingEvent=i,h._resume(),i.result}}}})(),M=({data:a})=>{let $=new TextDecoder,O=p.fs,x="";O.writeSync=(U,y)=>{if(U===1)S(y);else if(U===2){x+=$.decode(y);let f=x.split(`
`);f.length>1&&console.log(f.slice(0,-1).join(`
`)),x=f[f.length-1]}else throw new Error("Bad write");return y.length};let h=[],i,l=0;M=({data:U})=>(U.length>0&&(h.push(U),i&&i()),g),O.read=(U,y,f,v,t,o)=>{if(U!==0||f!==0||v!==y.length||t!==null)throw new Error("Bad read");if(h.length===0){i=()=>O.read(U,y,f,v,t,o);return}let E=h[0],_=Math.max(0,Math.min(v,E.length-l));y.set(E.subarray(l,l+_),f),l+=_,l===E.length&&(h.shift(),l=0),o(null,_)};let g=new p.Go;return g.argv=["","--service=0.24.2"],d(a,g).then(U=>{S(null),g.run(U)},U=>{S(U)}),g};async function d(a,$){if(a instanceof WebAssembly.Module)return WebAssembly.instantiate(a,$.importObject);let O=await fetch(a);if(!O.ok)throw new Error(`Failed to download ${JSON.stringify(a)}`);if("instantiateStreaming"in WebAssembly&&/^application\/wasm($|;)/i.test(O.headers.get("Content-Type")||""))return(await WebAssembly.instantiateStreaming(O,$.importObject)).instance;let x=await O.arrayBuffer();return(await WebAssembly.instantiate(x,$.importObject)).instance}return a=>M(a)})(S=>u.onmessage({data:S})),F;u={onmessage:null,postMessage:S=>setTimeout(()=>{try{F=R({data:S})}catch(M){w(M)}}),terminate(){if(F)for(let S of F._scheduledTimeouts.values())clearTimeout(S)}}}let m,k,c=new Promise((R,F)=>{m=R,k=F});u.onmessage=({data:R})=>{u.onmessage=({data:F})=>N(F),R?k(R):m()},u.postMessage(n||new URL(e,location.href).toString());let{readFromStdout:N,service:I}=He({writeToStdin(R){u.postMessage(R)},isSync:!1,hasFS:!1,esbuild:xe});await c,ge=()=>{u.terminate(),re=void 0,ge=void 0,we=void 0},we={build:R=>new Promise((F,S)=>{b.then(S),I.buildOrContext({callName:"build",refs:null,options:R,isTTY:!1,defaultWD:"/",callback:(M,p)=>M?S(M):F(p)})}),context:R=>new Promise((F,S)=>{b.then(S),I.buildOrContext({callName:"context",refs:null,options:R,isTTY:!1,defaultWD:"/",callback:(M,p)=>M?S(M):F(p)})}),transform:(R,F)=>new Promise((S,M)=>{b.then(M),I.transform({callName:"transform",refs:null,input:R,options:F||{},isTTY:!1,fs:{readFile(p,d){d(new Error("Internal error"),null)},writeFile(p,d){d(null)}},callback:(p,d)=>p?M(p):S(d)})}),formatMessages:(R,F)=>new Promise((S,M)=>{b.then(M),I.formatMessages({callName:"formatMessages",refs:null,messages:R,options:F,callback:(p,d)=>p?M(p):S(d)})}),analyzeMetafile:(R,F)=>new Promise((S,M)=>{b.then(M),I.analyzeMetafile({callName:"analyzeMetafile",refs:null,metafile:typeof R=="string"?R:JSON.stringify(R),options:F,callback:(p,d)=>p?M(p):S(d)})})}},pt=xe;export{lt as analyzeMetafile,ht as analyzeMetafileSync,rt as build,at as buildSync,st as context,pt as default,ot as formatMessages,ct as formatMessagesSync,mt as initialize,ft as stop,it as transform,ut as transformSync,nt as version};
//# sourceMappingURL=/build/browser.min-CE7LC2B5.js.map
